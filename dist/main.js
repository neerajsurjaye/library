(()=>{let e=[],t=[],n=(document.querySelector("#add-book"),document.querySelector("#content")),a=document.querySelector("#close-button"),o=document.querySelector("#pop-form"),d=document.querySelector("#add-book"),r=document.querySelector("#form-submit"),i=document.querySelector("#add-book-float");function s(e,t,n,a){this.name=e,this.description=t,this.pages_read=n,this.total_pages=a}function c(e){this.container=document.createElement("div"),this.left=document.createElement("div"),this.right=document.createElement("div"),this.name=document.createElement("h1"),this.description=document.createElement("p"),this.pages_read=document.createElement("p"),this.addBtn=document.createElement("div"),this.subBtn=document.createElement("div"),this.cross=document.createElement("div"),this.index=0,this.name.textContent=e.name,this.description.textContent=e.description,this.pages_read.textContent=`${e.pages_read} / ${e.total_pages}`}function l(n,a){n.left.append(n.name),n.left.append(n.description),n.container.append(n.left),n.container.append(n.right),n.right.append(n.addBtn),n.right.append(n.pages_read),n.right.append(n.subBtn),n.index=a,n.right.append(n.cross),n.container.classList.add("container"),n.right.classList.add("right"),n.left.classList.add("left"),n.cross.id="close-card",n.cross.textContent="x",n.addBtn.textContent="+",n.subBtn.textContent="-",n.addBtn.classList.add("primary-btn-con"),n.subBtn.classList.add("primary-btn-con"),n.addBtn.id="add",n.subBtn.id="sub",n.pages_read.id="pages-read",n.container.addEventListener("click",(function(a){"close-card"!=a.target.id?"add"!=a.target.id&&"sub"!=a.target.id||function(n,a){let o=0;console.log("ran",t);for(var d=0;d<t.length&&(console.log(d),null==t[d]||t[d].index!=a.index);d++)o++;"add"==n.target.id?e[o].pages_read+1>e[o].total_pages?alert("Err++"):e[o].pages_read++:"sub"==n.target.id&&(0==e[o].pages_read?alert("Err--"):e[o].pages_read--),a.pages_read.textContent=`${e[o].pages_read} / ${e[o].total_pages}`,b()}(a,n):function(t){console.log(e),console.log(t.index),e[t.index]=null,delete t,u(),b()}(n)}))}function u(){t=[],n.innerHTML="";for(var a=0;a<e.length;a++)null!=e[a]?(t[a]=new c(e[a]),l(t[a],a),n.append(t[a].container)):t[a]=null}function p(e){"close-button"==e.target.id&&(o.style.display="none"),"add-book"!=e.target.id&&"add-book-float"!=e.target.id||(o.style.display="flex")}null!=localStorage.getItem("book-library")&&(e=JSON.parse(localStorage.getItem("book-library"))),0!=e.length&&(console.log("MU LIBRARAY"),u()),new s("asdf","asdf ",43,345),a.addEventListener("click",p),d.addEventListener("click",p),i.addEventListener("click",p),r.addEventListener("click",(function(t){var n;n=new s(g.value,m.value,parseInt(f.value),parseInt(h.value)),e.push(n),b(),u(),o.style.display="none"}));let g=document.querySelector("#book-name"),m=document.querySelector("#description"),h=document.querySelector("#no-of-pages"),f=document.querySelector("#inp-pages-read");function b(){localStorage.setItem("book-library",JSON.stringify(e)),console.log(e)}})();